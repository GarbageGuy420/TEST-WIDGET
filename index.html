<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Widget Form</title>
    <link rel="stylesheet" href="https://cdn01.jotfor.ms/static/formCss.css?3.3.60613" type="text/css" />
    <script src="https://cdn01.jotfor.ms/static/jotform.forms.js?v=3.3.60613"></script>
    <script src="https://cdn01.jotfor.ms/s/umd/dd5a00e5083/for-widgets-server.js?v=3.3.60613"></script>
    <script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
</head>
<body>
    <form class="jotform-form" action="https://submit.jotform.com/submit/33213973252855" method="post" id="33213973252855" accept-charset="utf-8">
        <div role="main" class="form-all">
            <ul class="form-section page-section">
                <li class="form-line" id="id_1">
                    <label class="form-label" for="userInput">Enter Text</label>
                    <div id="cid_1" class="form-input">
                        <input type="text" id="userInput" name="userInput" required>
                        <input id="input_1" type="hidden" name="q1_submit" value="" />
                    </div>
                </li>
                <li class="form-line" id="id_2">
                    <div id="cid_2" class="form-input-wide">
                        <button id="input_2" type="submit" class="form-submit-button">Submit</button>
                    </div>
                </li>
            </ul>
        </div>
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var widgetFrame = document.createElement("iframe");
            widgetFrame.id = "customFieldFrame_1";
            widgetFrame.src = "//garbageguy420.github.io/TEST-WIDGET/";
            widgetFrame.frameBorder = "0";
            widgetFrame.scrolling = "no";
            widgetFrame.style = "max-width:620px; width:100%; height:240px; border:none;";
            document.getElementById("cid_1").appendChild(widgetFrame);
        });

        JFCustomWidget.subscribe("submit", function() {
            var userInputElement = document.getElementById('userInput');
            if (!userInputElement) {
                console.error("User input field not found");
                return;
            }
            var userInputValue = userInputElement.value.trim();
            document.getElementById('input_1').value = userInputValue;

            console.log("JotForm Submit Triggered: ", userInputValue);

            JFCustomWidget.sendSubmit({
                valid: userInputValue !== "",
                value: userInputValue
            });
        });
    </script>
</body>
</html>
